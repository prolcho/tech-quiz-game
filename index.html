<!DOCTYPE html>
<html lang="ko">
<head>

<!-- ì¶”ê°€ -->
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">


  <audio id="sfx-correct" src="correct.wav" preload="auto"></audio>
<audio id="sfx-wrong" src="wrong.wav" preload="auto"></audio>
<audio id="sfx-next" src="next.wav" preload="auto"></audio>

  <meta charset="UTF-8">

  <title>íƒ€ì ë“œë¡­ í€´ì¦ˆ++</title>

  <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Orbitron:wght@500&display=swap" rel="stylesheet">


  <!-- Headì— ì¶”ê°€ -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.css" />



  


  <style>


#modeSelector label { display:flex; align-items:center; gap:6px; cursor:pointer; }
#modeSelector input[type="radio"] { transform: translateY(1px); }
@supports (accent-color: auto) {
  #modeSelector input[type="radio"] { accent-color: #00ffe1; }
}


/* ê¸°ì¡´ #modeSelector ìŠ¤íƒ€ì¼ ì „ë¶€ ì§€ìš°ê³  â†“ ì´ê±¸ë¡œ êµì²´ */
/* âœ… ì „ì—­ì— ë‘¡ë‹ˆë‹¤: position: fixed ì œê±° ë²„ì „ */
#modeSelector{
  background: rgba(0,0,0,0.6);
  border-radius: 10px;
  padding: 6px 12px;
  display: flex;
  gap: 10px;
  font-size: 12px;
  font-family: 'Orbitron', sans-serif;
  color: #00ffe1;
}

/* âœ… ëª¨ë°”ì¼ì—ì„  ì¤„ ë°”ê¿ˆ í—ˆìš© */
@media (max-width:480px){
  #modeSelector{
    flex-wrap: wrap;
    gap: 6px;
    font-size: 0.9rem;
  }
}

body.compact-mode #topUI > div,
body.compact-mode #textInput,
body.compact-mode #questionBox,
body.compact-mode #explainBox,
body.compact-mode #modeSelector {
  font-size: 0.75rem !important;
  padding: 4px 6px !important;
}

body.compact-mode #textInput {
  font-size: 1rem !important;
  width: 80vw !important;
}

body.compact-mode #questionBox {
  font-size: 1.2rem !important;
}



@keyframes pulseGlow {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 10px rgba(179, 139, 255, 0.3);
  }
  50% {
    transform: scale(1.08);
    box-shadow: 0 0 20px rgba(179, 139, 255, 0.6);
  }
}




:root {
  --main-accent: #b38bff; /* ê·€ì—¬ìš´ ë³´ë¼ë¹› ê°•ì¡°ìƒ‰ */
  --bg-dark: #0a0a0a;
  --bg-light: #1a1a1a;
  --text-bright: #fff;
}





   html, body {
  margin: 0;
  padding: 0;
  background: linear-gradient(180deg, #0a0a0a, #1a1a1a);
  overflow: hidden;
}
body {
  font-family: 'Pretendard', 'Orbitron', sans-serif;
}

    canvas { display: block; }

    #questionBox {
    display: none;
      position: absolute; top: 30px; width: 100%; text-align: center;
      color: #00ffe1; font-size: 2rem; z-index: 10; text-shadow: 0 0 5px #0ff;
    }

    #scoreBox {
      top: 10px; left: 20px;
      color: #ffffff; font-size: 1rem; z-index: 10;
    }

    #inputBox {
      position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%);
      z-index: 10;
    }

    #textInput {
  font-size: 1.5rem;
  padding: 0.5rem;
  width: 320px;
  border: 2px solid #00ffe1;
  border-radius: 8px;
  background: #000000;
  color: #00ffe1;
  text-align: center;
  transition: transform 0.1s ease, box-shadow 0.3s ease;
  caret-color: #ff0; /* âœ… ì¶”ê°€ */
}

#textInput::placeholder {
  color: #00ffe188;    /* âœ… ì‹ ê·œ ë¸”ë¡ ì „ì²´ ì¶”ê°€ */
  font-style: italic;
}


#textInput:focus {
  outline: none;
  box-shadow: 0 0 12px #00ffe1, 0 0 30px #00ffe155; /* ê¸°ì¡´ë³´ë‹¤ ë” ê°•í•˜ê²Œ */
  background-color: #111; /* ì‚´ì§ ë°ê²Œ */
}

    #textInput.shake {
      transform: translateX(-50%) scale(1.05) rotate(1deg);
      animation: shake 0.3s ease;
    }

    @keyframes shake {
      0% { transform: translateX(-50%) translateX(0px); }
      25% { transform: translateX(-50%) translateX(-5px); }
      50% { transform: translateX(-50%) translateX(5px); }
      75% { transform: translateX(-50%) translateX(-5px); }
      100% { transform: translateX(-50%) translateX(0px); }
    }

    #explainBox {
  position: absolute;
  bottom: 20px;
  width: 100%;
  text-align: center;
  color: #ff0;
  font-size: 1.2rem;
  display: none;
  background-color: rgba(255,255,255,0.05);
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #888;  
  opacity: 0;
  transition: opacity 0.5s ease;
}
#explainBox.visible {
  opacity: 1;
}

#progressBox {
  position: absolute;
  top: 70px;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 10px;
  z-index: 10;
}
.progress-dot {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background-color: #333;
  border: 2px solid #00ffe1;
  transition: background-color 0.3s ease;
}
.progress-dot.active {
  background-color: #00ffe1;
}




#floatingTextContainer {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 999;
}
.floating-text {
  position: absolute;
  color: #ff0;
  font-size: 1.5rem;
  animation: floatUp 1s ease-out forwards;
}
@keyframes floatUp {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(-50px); }
}

.fade-out {
  opacity: 0;
  transition: opacity 0.5s ease;
}

.fade-in {
  opacity: 1;
  transition: opacity 0.5s ease;
}

@keyframes zoomFadeIn {
  0% {
    transform: scale(0.95);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes zoomFadeOut {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(1.05);
    opacity: 0;
  }
}

.fade-in {
  animation: zoomFadeIn 0.5s ease forwards;
}

.fade-out {
  animation: zoomFadeOut 0.5s ease forwards;
}

body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-image: radial-gradient(#00ffe1 0.5px, transparent 0.5px);
  background-size: 20px 20px;
  opacity: 0.03;
  z-index: 0;
  animation: gridMove 30s linear infinite;
}
@keyframes gridMove {
  from { background-position: 0 0; }
  to { background-position: 100px 100px; }
}



/* âœ… ë³´ë¼ ë²„íŠ¼ ë‘˜ì„ í‚¤ë³´ë“œ/ì…ë ¥ì°½ ìœ„ë¡œ ë„ìš°ê³  ì¢Œ/ìš°ë¡œ ë¶„ë¦¬ */
#manualHintButton,
#restartCurrentBtn{
  position: fixed !important;
  z-index: 1003 !important;
  bottom: calc(env(safe-area-inset-bottom) + var(--kb) + 88px) !important;
}

#manualHintButton{ left: 12px !important; right: auto !important; }
#restartCurrentBtn{ right: 12px !important; left: auto !important; }


@media (max-width: 480px) {
  #textInput {
    width: 90vw;
    font-size: 1.2rem;
  }

  #questionBox {
    font-size: 1.4rem;
    top: 20px;
  }

  #explainBox {
    font-size: 1rem;
    padding: 8px;
  }

  #scoreBox, #failCountBox, #statusBox {
    font-size: 0.9rem;
  }







  #startScreen,
  #congratsScreen {
    font-size: 1.4rem;
    padding: 20px;
  }


}



#topUI {
  position: fixed;
  top: 10px;
  left: 10px;
  right: 10px;
  z-index: 999;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: flex-start;
  align-items: flex-start;
}

#topUI > div {
  background: rgba(0, 0, 0, 0.6);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.9rem;
  font-family: 'Orbitron', sans-serif;
  color: #00ffe1;
}


    /* UI ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ ì˜ˆì • ì‹œ */


/* === Keyboard & Layout overrides (ì¶”ê°€) === */
:root { --kb: 0px; --footerH: 56px; --hudH: 48px; }

html, body { height: 100dvh; -webkit-text-size-adjust: 100%; }
body { overflow: hidden; } /* ë‚´ë¶€ ì»¨í…Œì´ë„ˆë§Œ ìŠ¤í¬ë¡¤ */

.app { min-height: 100dvh; display: grid; grid-template-rows: 1fr; }

.hud-top{
    
  position: fixed; top: calc(env(safe-area-inset-top) + 6px);
  left: 50%; transform: translateX(-50%); z-index: 1001;
  display:flex; gap:8px; flex-wrap:wrap; max-width:min(720px,94vw);


  
}

/* ì¤‘ì•™ í‘œì‹œ ì˜ì—­ */
.stage{
  position: relative; height: 100dvh; overflow:auto;
  display:flex; align-items:center; justify-content:center;
  padding:
    calc(env(safe-area-inset-top) + var(--hudH) + 12px)
    16px
    calc(env(safe-area-inset-bottom) + var(--kb) + var(--footerH) + 12px);
}

/* ë¬¸ì íƒ€ì¼ í–‰ */
.quiz-row{
  display:flex; flex-wrap:wrap; justify-content:center; align-items:center;
  gap:8px 10px; max-width:min(720px,92vw);
}

/* ë¬¸ì íƒ€ì¼: ì• ë‹ˆ/ì´ë™ ì „ë¶€ ë„ê¸° (ë®ì–´ì“°ê¸°) */
.quiz-row .ch{
  display:inline-flex; justify-content:center; align-items:center;
  width: clamp(28px, 8vw, 44px); height: clamp(28px, 8vw, 44px);
  font-size: clamp(16px, 4.5vw, 22px); font-weight:600; letter-spacing:.02em;
  border-radius:10px; border:1px solid rgba(53,246,215,.25);
  box-shadow: 0 0 12px rgba(53,246,215,.35);
  background:#000; color:#35f6d7;
  /* â†“ ê¸°ì¡´ íš¨ê³¼ë¥¼ ê°•ì œë¡œ ë¬´ë ¥í™” */
  position: static !important;
  transform: none !important;
  animation: none !important;
  transition: none !important;
}

/* ì…ë ¥ì°½: absolute â†’ fixed (ë®ì–´ì“°ê¸°) */
#inputBox{
  position: fixed !important;
  left:50%;
  transform: translateX(-50%) translateY(calc(var(--kb) * -1));
  bottom: calc(env(safe-area-inset-bottom) + 10px);
  z-index: 1002;
}

/* ìë™ ì¤Œ ë°©ì§€ */
input, textarea { font-size: 16px; }

/* HUD ì•ˆì˜ ì•„ì´í…œì€ ê³ ì • ì¢Œí‘œë¥¼ ì—†ì• ì„œ ê²¹ì¹¨ ë°©ì§€ */
.hud-top > * { position: static !important; }


canvas { position: fixed; inset: 0; z-index: 0; }
.hud-top, #questionBox, #progressBox, #inputBox, #explainBox, #floatingTextContainer { z-index: 1002; }

/* === ê³ ë¬´ì¤„ ìŠ¤í¬ë¡¤(í° í™”ë©´) ë°©ì§€ ê¸°ë³¸ ì„¤ì • === */
html, body {
  margin: 0;
  padding: 0;
  background: #0a0a0a;            /* í˜¹ì‹œ ë…¸ì¶œë¼ë„ ê²€ì •ìœ¼ë¡œ ë³´ì´ê²Œ */
  overscroll-behavior: none;       /* ìµœìƒë‹¨/ìµœí•˜ë‹¨ ëŒì–´ë„ ë°”ê¹¥ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì•ˆ ìƒˆì–´ ë‚˜ê° */
}

/* ë‚´ë¶€ ìŠ¤í¬ë¡¤ ì“°ëŠ” ì»¨í…Œì´ë„ˆë“¤ì€ ì²´ì´ë‹(ë°”ê¹¥ìœ¼ë¡œ íŠ€ëŠ” ê²ƒ) ë§‰ê¸° */
.stage {
  overscroll-behavior: contain;    /* ì»¨í…Œì´ë„ˆ ëì—ì„œ ë” ëŒì–´ë„ ë°”ê¹¥(body)ë¡œ ì•ˆ ë„˜ì–´ê° */
  -webkit-overflow-scrolling: touch; /* iOS ê´€ì„± ìŠ¤í¬ë¡¤ ìœ ì§€ (ë¶€ë“œëŸ¬ì›€) */
}

/* ì „ì²´ íŒíŠ¸ íŒì—…ë„ ìŠ¤í¬ë¡¤ì€ í•˜ë˜ ë°”ê¹¥ìœ¼ë¡œëŠ” ì•ˆ ìƒˆê²Œ */
#fullHintPopup {
  overflow-y: auto;
  overscroll-behavior: contain;
}

/* í˜¹ì‹œ â€œíŒì—… ì—´ë ¸ì„ ë•Œ ë°”ë”” ìŠ¤í¬ë¡¤ ì ê·¸ê¸°â€ê°€ í•„ìš”í•˜ë©´ ì´ í´ë˜ìŠ¤ ì‚¬ìš© */
body.lock-scroll {
  height: 100vh;
  overflow: hidden;
}


/* ===== ìƒë‹¨/í•˜ë‹¨ ë ˆì´ì•„ì›ƒ ê²¹ì¹¨ í•´ê²° ===== */
html, body {
  margin: 0;
  padding: 0;
  background: #0a0a0a;
  overscroll-behavior: none; /* í° í™”ë©´ ë°©ì§€(ë‹¹ê²¨ë„ ë°”ê¹¥ ìŠ¤í¬ë¡¤ ì•ˆ íŠ) */
}

/* HUD ì‹¤ì œ ë†’ì´ë¥¼ ë°˜ì˜í•´ ì§ˆë¬¸/ì§„í–‰ì ì´ HUD ì•„ë˜ì— ì˜¤ë„ë¡ */
#questionBox, #progressBox {
  position: fixed !important;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1002;
}
#questionBox {
  top: calc(env(safe-area-inset-top) + var(--hudH) + 6px) !important;
}
#progressBox {
  top: calc(env(safe-area-inset-top) + var(--hudH) + 56px) !important;
}

/* í•´ì„¤ ë°•ìŠ¤ê°€ ì…ë ¥ì°½/í‚¤ë³´ë“œì™€ ê²¹ì¹˜ì§€ ì•Šê²Œ í•˜ë‹¨ ì—¬ìœ  */
#explainBox {
  position: fixed !important;
  left: 0; right: 0;
  bottom: calc(env(safe-area-inset-bottom) + var(--kb) + 72px) !important;
  z-index: 1002;
}

/* ë‚´ë¶€ ìŠ¤í¬ë¡¤ ì“°ëŠ” ì˜ì—­ì€ ë°”ê¹¥ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì²´ì´ë‹ ê¸ˆì§€ */
.stage, #fullHintPopup {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* íŒì—… ë–  ìˆì„ ë•Œ ë°”ë”” ìŠ¤í¬ë¡¤ ì ê·¸ê³  ì‹¶ìœ¼ë©´ ì´ í´ë˜ìŠ¤ í† ê¸€ */
body.lock-scroll { height: 100vh; overflow: hidden; }

/* ====== íƒ€ì¼ â€˜íŒ¡!â€™ ì‚¬ë¼ì§ ì• ë‹ˆë©”ì´ì…˜ ====== */
.quiz-row .ch.pop {
  animation: popOut 280ms ease forwards;
}
@keyframes popOut {
  0%   { transform: scale(1);   opacity: 1; }
  60%  { transform: scale(1.25);}
  100% { transform: scale(0.6); opacity: 0; filter: blur(2px); }
}


/* === íŒíŠ¸ ì „ì²´ë³´ê¸°: ìœ„ìª½ ê³ ì • ì‹œíŠ¸ === */
#fullHintPopup{
  display:none;
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  top: calc(env(safe-area-inset-top) + var(--hudH) + 8px); /* HUD ë°”ë¡œ ì•„ë˜ */
  width: min(680px, 96vw);
  max-height: calc(100dvh - (env(safe-area-inset-top) + var(--hudH) + var(--footerH) + var(--kb) + 24px));
  overflow: auto;
  z-index: 1003;

  background: #111;
  border: 1px solid #00ffe1;
  border-radius: 12px;
  padding: 16px;
  color: #00ffe1;
  box-sizing: border-box;
}

#fullHintPopup h2{
  margin: 0 0 12px;
  text-align: center;
  font-family: 'Orbitron', sans-serif;
  font-size: 1.2rem;
}

#fullHintContent{ font-size: 1rem; line-height: 1.6; }

#fullHintPopup .hint-actions{
  margin-top: 12px;
  display: flex; justify-content: center;
}

#fullHintPopup .hint-actions button{
  background: rgba(255,255,255,0.06);
  border: 1px solid var(--main-accent);
  border-radius: 12px;
  color: var(--main-accent);
  font-family: 'Orbitron', sans-serif;
  font-size: 0.95rem;
  padding: 6px 12px;
  backdrop-filter: blur(4px);
  cursor: pointer;
}


#skipHint{
  position: fixed;
  right: 20px;
  top: calc(env(safe-area-inset-top) + var(--hudH) + 8px);
  z-index: 1002;
}

#skipHint #skipBtn{
  font-size: 0.9rem;
  color: #ddd;
  background: rgba(0,0,0,0.6);
  padding: 8px 12px;
  border-radius: 10px;
  border: 1px solid #00ffe1;
  font-family: 'Orbitron', sans-serif;
  -webkit-tap-highlight-color: transparent;
}



  </style>
</head>
<body>


<div class="app">
<div class="hud-top" id="hudTop">
  <div id="scoreBox">ì ìˆ˜: 0</div>
  <div id="failCountBox">âŒ Fail: 0</div>
  <button id="pauseBtn" onclick="togglePause()" style="
    background:#111; color:#00ffe1; border:1px solid #00ffe1;
    padding:6px 12px; border-radius:8px; font-size:.9rem;">
    â¸ ì¼ì‹œì •ì§€
  </button>

  <!-- âœ… HUD ì•ˆìœ¼ë¡œ ì´ë™ -->
  <div id="modeSelector">
    <label><input type="radio" name="mode" value="strict"> Strict</label>
    <label><input type="radio" name="mode" value="normal" checked> Normal</label>
    <label><input type="radio" name="mode" value="fuzzy"> Fuzzy</label>
  </div>
</div>

  


  <main class="stage">
    <div id="quizRow" class="quiz-row"></div>
  </main>



<!-- âœ… ì „ì²´ íŒíŠ¸ ë³´ê¸° ìˆ˜ë™ ë²„íŠ¼ -->
<div id="manualHintButton" style="
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: 1000;
">
  <button onclick="openFullHintManually()" style="
background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--main-accent);
  border-radius: 12px;
  color: var(--main-accent);
  font-family: 'Orbitron', sans-serif;
  font-size: 0.95rem;
  padding: 6px 12px;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
  cursor: pointer;
  ">ğŸ’¡ íŒíŠ¸ ì „ì²´ ì—´ê¸°</button>
</div>



<div id="restartCurrentBtn" style="
  position: fixed;
  bottom: 20px;
  left: 160px;
  z-index: 1000;
">
  <button onclick="restartCurrentQuestion()" style="
background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--main-accent);
  border-radius: 12px;
  color: var(--main-accent);
  font-family: 'Orbitron', sans-serif;
  font-size: 0.95rem;
  padding: 6px 12px;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
  cursor: pointer;
  ">ğŸ”„ í˜„ì¬ ë¬¸ì œ ë‹¤ì‹œ</button>
</div>














<!-- ê¸°ì¡´ #skipHint ë‚´ìš© ì‚­ì œ í›„ êµì²´ -->
<div id="skipHint">
  <button id="skipBtn" type="button">â© ë‹¤ìŒ ë¬¸ì œ (Shift+â†’)</button>
</div>





  <div id="questionBox"></div>
  <div id="progressBox"></div>
<div id="pauseNotice" style="display:none; position:absolute; top:50%; left:50%;
transform:translate(-50%,-50%); color:#fff; font-size:2rem; background:#111; 
padding:1rem 2rem; border:2px solid #00ffe1; z-index:20;">
â¸ ì¼ì‹œì •ì§€ ì¤‘
</div>


<div id="statusBox" style="
  position: fixed;
  top: 10px;
  right: 20px;
  background: rgba(0,0,0,0.7);
  color: #00ffff;
  padding: 8px 16px;
  border-radius: 12px;
  font-family: 'Orbitron', sans-serif;
  font-size: 14px;
  z-index: 999;
">
  ì§„í–‰: 1 / ?
</div>





  <div id="inputBox">
    <input type="text" id="textInput" placeholder="ì—¬ê¸°ì— í‚¤ì›Œë“œ ì…ë ¥ í›„ Enter" autocomplete="off" />
  </div>
  <div id="explainBox"><span id="hintCharacter">âš¡ì „ê¸°ì‹ :</span> <span id="hintText"></span></div>

  <div id="floatingTextContainer"></div>

  <canvas id="canvas"></canvas>



<div id="congratsScreen" style="
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.95);
  color: #00ffcc;
  font-size: 2rem;
  font-family: 'Orbitron', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 9999;
  text-align: center;
">
  ğŸ‰ ëª¨ë“  ë¬¸ì œë¥¼ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤!<br><br>
  <button onclick="restartQuiz()" style="
background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--main-accent);
  border-radius: 12px;
  color: var(--main-accent);
  font-family: 'Orbitron', sans-serif;
  font-size: 0.95rem;
  padding: 6px 12px;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
  cursor: pointer;
  ">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
</div>


<div id="startScreen" style="
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: #00ffe1;
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8rem;
  z-index: 9999;
  text-align: center;
">
  ğŸ§  <strong>íƒ€ì ë“œë¡­ í€´ì¦ˆ++</strong><br><br>
  <span style="font-size: 1rem; color: #999">Enter í‚¤ ì…ë ¥ í˜¹ì€ í„°ì¹˜í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”</span>
  <button id="startBtn" style="
  margin-top: 20px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid var(--main-accent);
  border-radius: 12px;
  color: var(--main-accent);
  font-family: 'Orbitron', sans-serif;
  font-size: 1.2rem;
  padding: 10px 20px;
  transition: all 0.3s ease;
  backdrop-filter: blur(4px);
  cursor: pointer;
animation: pulseGlow 2s infinite ease-in-out;


">
  â–¶ ì‹œì‘í•˜ê¸°
</button>

</div>








  <script>


const STATIC_MODE = true;


function isMobile() {
  return /iPhone|Android/i.test(navigator.userAgent);
}

window.addEventListener('resize', () => {
  if (!isMobile()) return;

  const ratio = window.innerHeight / window.outerHeight;
  const isKeyboardUp = ratio < 0.75;

  if (isKeyboardUp) {
    document.body.classList.add('compact-mode');
  } else {
    document.body.classList.remove('compact-mode');
  }
});



document.getElementById('startBtn').addEventListener('click', startQuiz);




function restartCurrentQuestion() {
  // í˜„ì¬ ë¬¸ì œì˜ ìƒíƒœë¥¼ ì´ˆê¸°í™”
  failCount = 0;
  activeLetters = [];
  fallingLetters = [];
  particles = [];
  letterSpawnTimer = 0;
  isPaused = false;
  textInput.value = '';
  explainBox.style.display = 'none';
  explainBox.classList.remove('visible');
  document.getElementById('fullHintPopup').style.display = 'none';

  // ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
  loadQuestion();
  updateStatusBox();
  playSound("sfx-next"); // íš¨ê³¼ìŒìœ¼ë¡œ êµ¬ë¶„
}








function closeFullHintPopup() {
  document.getElementById('fullHintPopup').style.display = 'none';
  failCount = 0; // ğŸ” ì´ˆê¸°í™”
  updateFailCountUI(); // UIì—ë„ ë°˜ì˜
  explainBox.style.display = 'none'; // í•´ì„¤ì°½ë„ í•¨ê»˜ ìˆ¨ê¸°ê¸°
  explainBox.classList.remove('visible');
}







function openFullHintManually() {
  const fullHintBox = document.getElementById('fullHintPopup');
  const content = document.getElementById('fullHintContent');
  const currentQuiz = quizData[current];
  let html = `<strong>ë¬¸ì œ:</strong> ${currentQuiz.title}<br><br>`;
  html += `<strong>íŒíŠ¸:</strong> ${currentQuiz.hint}<br><br>`;
  html += `<strong>ì •ë‹µ ëª©ë¡:</strong><br><ul>`;
  currentQuiz.answers.forEach(ans => {
    html += `<li><strong>${ans.letter}</strong>: ${ans.text}</li>`;
  });
  html += `</ul><br><em style="color:#ccc;">â€» í•™ìŠµìš©ìœ¼ë¡œ ì •ë‹µ ì „ì²´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</em>`;
  content.innerHTML = html;
  fullHintBox.style.display = 'block';
}


function skipQuestion() {
  if (!isStarted || isPaused) return;

  if (current + 1 >= quizData.length) {
    document.getElementById('congratsScreen').style.display = 'flex';
    return;
  }

  current++;
  failCount = 0;
  updateFailCountUI();

  loadQuestion();
  updateStatusBox();
  playSound("sfx-next");

  textInput.value = '';
  explainBox.style.display = 'none';
  explainBox.classList.remove('visible');
}

// âœ… ì „ì—­ì—ì„œ 1íšŒë§Œ ì—°ê²° (skipQuestion ì •ì˜ ë°”ë¡œ ì•„ë˜ ì¶”ì²œ)
const skipBtn = document.getElementById('skipBtn');
if (skipBtn) skipBtn.addEventListener('click', skipQuestion);


function restartQuiz() {
   isStarted = true;  // ğŸ”¥ ì¶”ê°€
  current = 0;
  score = 0;
  failCount = 0;
  document.getElementById('congratsScreen').style.display = 'none';
  shuffleArray(quizData); // ë‹¤ì‹œ ì„ê³ 
  loadQuestion();
  updateProgressUI();
  updateStatusBox();
}




function updateStatusBox() {
  const statusBox = document.getElementById('statusBox');
  statusBox.textContent = `ì§„í–‰: ${current + 1} / ${quizData.length}`;
}




function togglePause() {
  isPaused = !isPaused;
  wasManuallyPaused = isPaused; // âœ… ì¼ì‹œì •ì§€ í–ˆëŠ”ì§€ ê¸°ì–µí•´ë‘ 

  const pauseBox = document.getElementById('pauseNotice');
  const pauseBtn = document.getElementById('pauseBtn');

  pauseBox.style.display = isPaused ? 'block' : 'none';
  pauseBtn.textContent = isPaused ? "â–¶ ì¬ê°œ" : "â¸ ì¼ì‹œì •ì§€";

 if (!isPaused && !STATIC_MODE) animate();

}



function updateProgressUI() {
  const box = document.getElementById('progressBox');
  box.innerHTML = ''; // ì´ˆê¸°í™”
  const total = quizData[current].answers.length;
  const currentHits = total - activeLetters.length;
  for (let i = 0; i < total; i++) {
    const dot = document.createElement('div');
    dot.classList.add('progress-dot');
    if (i < currentHits) dot.classList.add('active');
    box.appendChild(dot);
  }
}


function showFloatingText(x, y, text = "+1ì !") {
  const span = document.createElement("span");
  span.className = "floating-text";
  span.textContent = text;
  span.style.left = `${x}px`;
  span.style.top = `${y}px`;
  document.getElementById("floatingTextContainer").appendChild(span);
  setTimeout(() => span.remove(), 1000);
}
function playSound(id) {
  const sound = document.getElementById(id);
  if (sound) {
    sound.currentTime = 0;
    sound.play();
  }
}


    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});




    canvas.height = window.innerHeight;

    const questionBox = document.getElementById('questionBox');
    const scoreBox = document.getElementById('scoreBox');
    const textInput = document.getElementById('textInput');
    const explainBox = document.getElementById('explainBox');

    const quizData = [
{
  title: "1. 3ìƒì—ì„œ ë‹¨ìƒìœ¼ë¡œ ë³€í™˜ ê²°ì„ ",
  hint: "ìŠ¤ë³€ì—­ë¦¬",
  answers: [
    {
      letter: "ìŠ¤",
      text: "ìŠ¤ì½”íŠ¸ê²°ì„ ",
      aliases: ["ìŠ¤ì½”íŠ¸", "ìŠ¤ì½”íŠ¸ ê²°ì„ ", "Scott ê²°ì„ ", "Scott connection"]
    },
    {
      letter: "ë³€",
      text: "ë³€í˜•ìš°ë“œë¸Œë¦¬ì§€ê²°ì„ ",
      aliases: ["ë³€í˜•ìš°ë“œë¸Œë¦¬ì§€", "ìš°ë“œë¸Œë¦¬ì§€", "ìš°ë“œë¸Œë¦¬ì§€ ê²°ì„ ", "Woodbridge ê²°ì„ "]
    },
    {
      letter: "ì—­",
      text: "ì—­Vê²°ì„ ",
      aliases: ["ì—­V", "ì—­V ê²°ì„ ", "ì—­ë¸Œì´ê²°ì„ ", "ì—­ ë¸Œì´ ê²°ì„ "]
    },
    {
      letter: "ë¦¬",
      text: "ë¦¬ì•¡í„°ì™€ ì½˜ë´ì„œì— ì˜í•œ ë°©ë²•",
      aliases: ["ë¦¬ì•¡í„°", "ì½˜ë´ì„œ", "ë¦¬ì•¡í„° ì½˜ë´ì„œ ë°©ë²•", "ë¦¬ì•¡í„°ì™€ ì½˜ë´ì„œ", "ë¦¬ì•¡í„° ì½˜ë´ì„œ"]
    }
  ],
  explain: "3ìƒì„ ë‹¨ìƒìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ëŒ€í‘œì  ë°©ì‹ì€ ìŠ¤ì½”íŠ¸ê²°ì„ , ë³€í˜•ìš°ë“œë¸Œë¦¬ì§€ê²°ì„ , ì—­Vê²°ì„ , ê·¸ë¦¬ê³  ë¦¬ì•¡í„°ì™€ ì½˜ë´ì„œì— ì˜í•œ ë°©ë²•ì´ ìˆë‹¤."
},


 {
  title: "1-1. ìŠ¤ì½”íŠ¸ê²°ì„ ì˜ íŠ¹ì§•",
  hint: "ë‹¨ìŠ¤ì „êµì´ì¤‘ê¶Œí†µ",
  answers: [
    {
      letter: "ë‹¨",
      text: "ë‹¨ìƒë³€ì••ê¸° 2ê°œë¥¼ Tí˜•ìœ¼ë¡œ ê²°ì„ í•œ ë°©ì‹",
      aliases: ["ë‹¨ìƒë³€ì••ê¸°", "Tí˜•ê²°ì„ ", "Tí˜•", "Tí˜• ê²°ì„ "]
    },
    {
      letter: "ìŠ¤",
      text: "ìŠ¤ì½”íŠ¸ê²°ì„  ì´ìš©ì‹œ 90ë„ ìœ„ìƒì°¨ê°€ ìˆëŠ” ë‹¨ìƒì „ì› 2ê°œë¥¼ ì–»ìŒ",
      aliases: ["90ë„ ìœ„ìƒì°¨", "ìœ„ìƒì°¨ 90ë„", "ë‹¨ìƒì „ì› 2ê°œ"]
    },
    {
      letter: "ì „",
      text: "ì „ì••ë¶ˆí‰í˜• ë°©ì§€ë¥¼ ìœ„í•´ ì‚¬ìš©",
      aliases: ["ì „ì••ë¶ˆí‰í˜•", "ì „ì••ë¶ˆê· í˜•", "ë¶ˆí‰í˜• ë°©ì§€"]
    },
    {
      letter: "êµ",
      text: "êµë¥˜ì „ê¸°ì² ë„ ATê¸‰ì „ë°©ì‹ì— ì£¼ë¡œ ì‚¬ìš©",
      aliases: ["ATê¸‰ì „ë°©ì‹", "êµë¥˜ì „ê¸°ì² ë„", "ê¸‰ì „ë°©ì‹"]
    },
    {
      letter: "ì´",
      text: "ì´ìš©ë¥ ì´ 92.8%ë¡œ ë†’ì€ í¸",
      aliases: ["ì´ìš©ë¥  92.8%", "ì´ìš©ë¥  ë†’ìŒ", "íš¨ìœ¨ 92.8%"]
    },
    {
      letter: "ì¤‘",
      text: "ì¤‘ì„±ì  ì ‘ì§€ ë¶ˆê°€",
      aliases: ["ì¤‘ì„±ì  ì—†ìŒ", "ì¤‘ì„±ì  ì ‘ì§€ ë¶ˆê°€", "ì ‘ì§€ ë¶ˆê°€"]
    },
    {
      letter: "ê¶Œ",
      text: "ê¶Œì„  ì„í”¼ë˜ìŠ¤ ì •í•© ë¶ˆê°€",
      aliases: ["ì„í”¼ë˜ìŠ¤ ì •í•© ì•ˆë¨", "ê¶Œì„  ì •í•© ë¶ˆê°€", "ì„í”¼ë˜ìŠ¤ ë¶ˆì¼ì¹˜"]
    },
    {
      letter: "í†µ",
      text: "í†µì‹ ì„  ìœ ë„ì¥ì•  ë°œìƒ",
      aliases: ["í†µì‹ ì„  ì¥ì• ", "ìœ ë„ì¥ì• ", "ìœ ë„ ì „ì••"]
    }
  ],
  explain: "ë‹¨ìƒ 2ê°œ Tí˜•, 90ë„ ìœ„ìƒì°¨, ì „ì••ë¶ˆí‰í˜• ë°©ì§€, ATê¸‰ì „ë°©ì‹ ì‚¬ìš©, ì´ìš©ë¥  92.8%, ì¤‘ì„±ì  ì ‘ì§€ ë¶ˆê°€, ì„í”¼ë˜ìŠ¤ ì •í•© ë¶ˆê°€, ìœ ë„ì¥ì•  ë°œìƒ"
},{
  title: "1-2. ë³€í˜•ìš°ë“œë¸Œë¦¬ì§€ê²°ì„ ì˜ íŠ¹ì§•",
  hint: "ìŠ¹ìŠ¤ìŠ¤ì „",
  answers: [
    {
      letter: "ìŠ¹",
      text: "ìŠ¹ì••ìš© ë‹¨ê¶Œë³€ì••ê¸°ë¥¼ ì´ìš©í•œ ë°©ì‹ì´ë‹¤",
      aliases: ["ìŠ¹ì••ìš© ë‹¨ê¶Œë³€ì••ê¸°", "ë‹¨ê¶Œë³€ì••ê¸°", "ìŠ¹ì••ìš©"]
    },
    {
      letter: "ìŠ¤",
      text: "ìŠ¤ì½”íŠ¸ê²°ì„  ë³€ì••ê¸°ì™€ ë™ì¼í•œ ê¸°ëŠ¥ì„ ê°€ì§€ë©´ì„œ 1ì°¨ì¸¡ì— ì¤‘ì„±ì  ì ‘ì§€ë¥¼ ì·¨í•˜ëŠ” ë°©ì‹",
      aliases: ["ìŠ¤ì½”íŠ¸ì™€ ë™ì¼ ê¸°ëŠ¥", "1ì°¨ì¸¡ ì¤‘ì„±ì  ì ‘ì§€", "ì¤‘ì„±ì  ì ‘ì§€"]
    },
    {
      letter: "ìŠ¤",
      text: "ìŠ¤ì½”íŠ¸ê²°ì„ ì˜ ê²°ì ì„ ë³´ì™„í•œ ë°©ì‹",
      aliases: ["ìŠ¤ì½”íŠ¸ê²°ì„  ë³´ì™„", "ê²°ì  ë³´ì™„", "ë³´ì™„ ë°©ì‹"]
    },
    {
      letter: "ì „",
      text: "ì „ê¸°ì² ë„ ì¥ì•  ë°©ì§€ìš©ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤(ì¼ë³¸)",
      aliases: ["ì „ê¸°ì² ë„", "ì¥ì•  ë°©ì§€", "ì¼ë³¸ ì „ì² "]
    }
  ],
  explain: "ë³€í˜•ìš°ë“œë¸Œë¦¬ì§€ê²°ì„ ì€ ìŠ¹ì••ìš© ë‹¨ê¶Œë³€ì••ê¸°ë¥¼ ì‚¬ìš©í•˜ê³ , ìŠ¤ì½”íŠ¸ê²°ì„ ì˜ ê¸°ëŠ¥ê³¼ ê²°ì ì„ ë³´ì™„í•˜ë©°, ì¤‘ì„±ì  ì ‘ì§€ê°€ ê°€ëŠ¥í•˜ê³  ì¼ë³¸ ì „ê¸°ì² ë„ì—ì„œ ì¥ì•  ë°©ì§€ìš©ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤."
},{
  "title": "ì „ë ¥ì„ ì— ì˜í•œ í†µì‹ ì„  ìœ ë„ì¥í•´ ëŒ€ì±…",
  "hint": "ì´ì°¨ì—°ì—°ì§€ì´ì°¨êµê³ ì €ì§ì¤‘ì—°ìœ ì¡ë£¨",
  "answers": [
    {
      "letter": "ì´",
      "text": "ì´ê²©ê±°ë¦¬ë¥¼ í¬ê²Œ í•œë‹¤",
      "aliases": ["ì´ê²©ê±°ë¦¬ í™•ë³´", "ê±°ë¦¬ ë²Œë¦¬ê¸°", "ì´ê²©"]
    },
    {
      "letter": "ì°¨",
      "text": "ì°¨íì„ ì„ ì‚¬ì´ì— ì„¤ì¹˜í•œë‹¤",
      "aliases": ["ì°¨íì„  ì„¤ì¹˜", "ì°¨í", "ì°¨íì„ "]
    },
    {
      "letter": "ì—°",
      "text": "ì—°ê°€í•œë‹¤ (ì „ë ¥ì„ )",
      "aliases": ["ì—°ê°€", "ì—°ê°€ ë°©ì‹", "ì—°ê°€ ì „ë ¥ì„ "]
    },
    {
      "letter": "ì—°",
      "text": "ì—°í”¼ì¼€ì´ë¸”ê³¼ ê´‘ì¼€ì´ë¸”ì„ ì‚¬ìš©",
      "aliases": ["ì—°í”¼ì¼€ì´ë¸”", "ê´‘ì¼€ì´ë¸”", "ì°¨í ì¼€ì´ë¸”"]
    },
    {
      "letter": "ì§€",
      "text": "ì§€ìƒê³ ë¥¼ ë†’ì¸ë‹¤",
      "aliases": ["ì§€ìƒê³  ì¦ê°€", "ë†’ì´ ì¡°ì ˆ", "ì§€ìƒê³ "]
    },
    {
      "letter": "ì´",
      "text": "ì´ê²©ê±°ë¦¬ë¥¼ í¬ê²Œ í•œë‹¤ (ë°˜ë³µ)",
      "aliases": ["ê±°ë¦¬ ì´ê²©", "ì´ê²©ê±°ë¦¬", "ê±°ë¦¬ í™•ë³´"]
    },
    {
      "letter": "ì°¨",
      "text": "ì°¨íì„ ì„ ì„¤ì¹˜í•œë‹¤ (ë°˜ë³µ)",
      "aliases": ["ì°¨í", "ì°¨íì„ ", "ë³´í˜¸ì„ "]
    },
    {
      "letter": "êµ",
      "text": "êµì°¨ëœ ê²½ìš° ì§ê°ìœ¼ë¡œ ì„¤ì¹˜í•œë‹¤",
      "aliases": ["ì§ê° êµì°¨", "ì§ê° ì„¤ì¹˜", "êµì°¨ ì§ê°"]
    },
    {
      "letter": "ê³ ",
      "text": "ê³ ì†ë„ ì°¨ë‹¨ë°©ì‹ì„ ì±„ìš©í•œë‹¤",
      "aliases": ["ê³ ì† ì°¨ë‹¨", "ë¹ ë¥¸ ì°¨ë‹¨", "ê³ ì†ë„"]
    },
    {
      "letter": "ì €",
      "text": "ì¤‘ì„±ì  ì €ê°ì ‘ì§€ì˜ ê²½ìš° ì €í•­ê°’ì„ í¬ê²Œ í•˜ì—¬ ì§€ë½ì „ë¥˜ë¥¼ ì¤„ì¸ë‹¤",
      "aliases": ["ì €ê°ì ‘ì§€", "ì €í•­ ì¦ëŒ€", "ì§€ë½ì „ë¥˜ ì¤„ì´ê¸°"]
    },
    {
      "letter": "ì§",
      "text": "ì¤‘ì„±ì  ì§ì ‘ì ‘ì§€ì˜ ê²½ìš° ë‹¤ì¤‘ì ‘ì§€í•˜ì—¬ ê¸°ìœ ë„ì „ì••ì„ ë‚®ì¶˜ë‹¤",
      "aliases": ["ì§ì ‘ì ‘ì§€", "ë‹¤ì¤‘ì ‘ì§€", "ê¸°ìœ ë„ì „ì•• ì €ê°"]
    },
    {
      "letter": "ì¤‘",
      "text": "ì¤‘ê³„ì½”ì¼ì„ ì¤‘ê°„ì— ë„£ì–´ êµ¬ê°„ ë¶„í• í•œë‹¤ (í†µì‹ ì„ )",
      "aliases": ["ì¤‘ê³„ì½”ì¼", "êµ¬ê°„ë¶„í• ", "ì¤‘ê°„ ì‚½ì…"]
    },
    {
      "letter": "ì—°",
      "text": "ì—°í”¼ì¼€ì´ë¸” ì‚¬ìš©",
      "aliases": ["ì—°í”¼ ì¼€ì´ë¸”", "ì°¨íí˜• ì¼€ì´ë¸”", "ì—°í”¼"]
    },
    {
      "letter": "ìœ ",
      "text": "ìœ ë„ì „ì•• ì–µì œë¥¼ ìœ„í•´ í†µì‹ ì„ ì¸¡ì— ìš°ìˆ˜í•œ í”¼ë¢°ê¸°ë¥¼ ì‚¬ìš©",
      "aliases": ["ìœ ë„ì „ì•• ì–µì œ", "í”¼ë¢°ê¸°", "í†µì‹ ì„  í”¼ë¢°ê¸°"]
    },
    {
      "letter": "ì¡",
      "text": "ì¡ìŒ ì €ê°ì„ ìœ„í•´ ë°°ë¥˜ì½”ì¼ë¡œ í†µì‹ ì„  ì ‘ì§€",
      "aliases": ["ì¡ìŒ ì œê±°", "ë°°ë¥˜ì½”ì¼", "í†µì‹ ì„  ì ‘ì§€"]
    },
    {
      "letter": "ë£¨",
      "text": "ë£¨íŠ¸ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ê´‘ì¼€ì´ë¸”ì„ ì‚¬ìš©",
      "aliases": ["ë£¨íŠ¸ ë³€ê²½", "ê²½ë¡œ ë³€ê²½", "ê´‘ì¼€ì´ë¸”"]
    }
  ],
  "explain": "ì „ë ¥ì„ ì— ì˜í•œ í†µì‹ ì„  ìœ ë„ì¥í•´ëŠ” ê±°ë¦¬, ì°¨í, ì ‘ì§€ êµ¬ì¡°, ì¼€ì´ë¸” ì¢…ë¥˜, ì ‘ì§€ ë°©ì‹ ë“± ë‹¤ì–‘í•œ ìš”ì†Œì— ë”°ë¼ ì˜í–¥ì„ ë°›ìœ¼ë©°, ì´ë¥¼ ì™„í™”í•˜ê¸° ìœ„í•œ ì¢…í•©ì  ëŒ€ì±…ì—ëŠ” ì´ê²© í™•ë³´, ì—°ê°€, ì°¨íì„ , í”¼ë¢°ê¸° ì„¤ì¹˜, ë£¨íŠ¸ ë³€ê²½ ë“±ì´ í¬í•¨ëœë‹¤. íŠ¹íˆ ì ‘ì§€ ë°©ì‹ì— ë”°ë¼ ì§€ë½ì „ë¥˜ ìœ ì… ë°©ì‹ì´ ë‹¬ë¼ì§€ê³ , ì´ì— ë”°ë¼ ìœ ë„ì „ì•• ì €ê° ì „ëµë„ ë‹¬ë¼ì§„ë‹¤."
},{
  "title": "ë¶„ê¸°íšŒë¡œ ì°¨ë‹¨ê¸° ì •ê²© ì‚°ì •ë°©ë²•",
  "hint": "ì„¤ê¸°ë³´ì „ì°¨ë„ìµœë³‘ì ˆ",
  "answers": [
    {
      "letter": "ì„¤",
      "text": "ì „ë™ê¸° ì„¤ê³„ì „ë¥˜",
      "aliases": ["ì„¤ê³„ì „ë¥˜", "ì „ë™ê¸° ì „ë¥˜", "ê¸°ì¤€ì „ë¥˜"]
    },
    {
      "letter": "ê¸°",
      "text": "ì „ì „ì•• ê¸°ë™ë°°ìœ¨",
      "aliases": ["ê¸°ë™ë°°ìœ¨", "ì „ì••ë°°ìœ¨", "ì „ê¸°ë™ ë°°ìœ¨"]
    },
    {
      "letter": "ë³´",
      "text": "ë³´í˜¸ì¥ì¹˜ì˜ ê¸°ì•½ ë™ì‘ë°°ìœ¨",
      "aliases": ["ë³´í˜¸ì¥ì¹˜ ë°°ìœ¨", "ê¸°ì•½ë°°ìœ¨", "ë³´í˜¸ ë°°ìœ¨"]
    },
    {
      "letter": "ì „",
      "text": "ì „ë™ê¸° ê¸°ë™ ëŒì…ì „ë¥˜",
      "aliases": ["ê¸°ë™ ëŒì…ì „ë¥˜", "ëŒì…ì „ë¥˜", "ì „ë™ê¸° ê¸°ë™ì „ë¥˜"]
    },
    {
      "letter": "ì°¨",
      "text": "ì°¨ë‹¨ê¸° ìˆœì‹œ ë™ì‘ë°°ìœ¨",
      "aliases": ["ì°¨ë‹¨ê¸° ë°°ìœ¨", "ìˆœì‹œë™ì‘", "ìˆœì‹œë°°ìœ¨"]
    },
    {
      "letter": "ë„",
      "text": "ë„ì²´ êµµê¸°",
      "aliases": ["ë„ì²´êµµê¸°", "ì „ì„ êµµê¸°", "ë„ì²´ í¬ê¸°"]
    },
    {
      "letter": "ìµœ",
      "text": "ìµœì†Œ ë‹¨ë½ì „ë¥˜",
      "aliases": ["ìµœì†Œë‹¨ë½", "ìµœì†Œë‹¨ë½ì „ë¥˜", "ë‹¨ë½ì „ë¥˜"]
    },
    {
      "letter": "ë³‘",
      "text": "ë³‘ë ¬ ë„ì²´ìˆ˜",
      "aliases": ["ë³‘ë ¬ë„ì²´", "ë³‘ë ¬ìˆ˜", "ë„ì²´ ë³‘ë ¬"]
    },
    {
      "letter": "ì ˆ",
      "text": "ì ˆì—°ë¬¼ ë° ì£¼ìœ„ì˜¨ë„ì— ë”°ë¥¸ ìƒìˆ˜",
      "aliases": ["ì ˆì—° ìƒìˆ˜", "ì£¼ìœ„ì˜¨ë„", "ì ˆì—°ë¬¼ ì˜¨ë„"]
    }
  ],
  "explain": "ë¶„ê¸°íšŒë¡œ ì°¨ë‹¨ê¸°ì˜ ì •ê²©ì„ ì‚°ì •í•  ë•ŒëŠ” ì „ë™ê¸°ì˜ ì„¤ê³„ì „ë¥˜, ê¸°ë™ íŠ¹ì„±, ë³´í˜¸ì¥ì¹˜ì˜ ë™ì‘ íŠ¹ì„±, ì°¨ë‹¨ê¸°ì˜ ìˆœì‹œë™ì‘ ì¡°ê±´ ë“±ì„ ëª¨ë‘ ê³ ë ¤í•´ì•¼ í•˜ë©°, ë„ì²´ êµµê¸°, ë³‘ë ¬ ë„ì²´ìˆ˜, ì ˆì—° ë° í™˜ê²½ ì¡°ê±´ ë“±ë„ í•¨ê»˜ ë°˜ì˜ë˜ì–´ì•¼ í•œë‹¤."
}












];


let isStarted = false;
let current = 0;
let activeLetters = [];
let fallingLetters = [];


  let score = 0;
  let letterSpawnTimer = 0;
  let lives = 3;
  let isPaused = false;
  let particles = [];
  let failCount = 0;

// âœ… ì‹¤íŒ¨ íšŸìˆ˜ í‘œì‹œ í•¨ìˆ˜ (ì „ì—­ìœ¼ë¡œ ì´ë™)
function updateFailCountUI() {
  document.getElementById('failCountBox').textContent = `âŒ Fail: ${failCount}`;
}



let matchMode = 'normal'; // ê¸°ë³¸ ëª¨ë“œ

let wasManuallyPaused = false;


let animationFrameId = null;  // ğŸ”¥ ì• ë‹ˆë©”ì´ì…˜ ID ì¶”ì ìš©




    
const LETTER_SPEED = 1.0; // âœ… ì¼ì •í•œ ì†ë„

class FallingLetter {
  constructor(id, letter, answer, x) {
    this.id = id;           // ì¶”ê°€ë¨
    this.letter = letter;
    this.answer = answer;
    this.x = x;
    this.y = -50;
    this.speed = LETTER_SPEED;
    this.marked = false;
  }

      update() { this.y += this.speed; }
      draw(ctx) {
  ctx.font = '36px Orbitron';
  ctx.fillStyle = '#00ffe1';
  ctx.shadowColor = '#00ffff';
  ctx.shadowBlur = 15;
  ctx.fillText(this.letter, this.x, this.y);
  ctx.shadowBlur = 0; // reset
}

    }

    class Particle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.dx = (Math.random() - 0.5) * 6;
        this.dy = (Math.random() - 0.5) * 6;
        this.life = 60;
        this.size = 5 + Math.random() * 5;
      }
      update() {
        this.x += this.dx;
        this.y += this.dy;
        this.life--;
      }
      draw(ctx) {
        ctx.fillStyle = 'rgba(255, 255, 100, 0.8)';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

function spawnLetter(letterObj) {
  const x = Math.random() * (canvas.width - 200) + 100;
  fallingLetters.push(new FallingLetter(letterObj.id, letterObj.letter, letterObj.answer, x));
}


    function explode(x, y) {
      for (let i = 0; i < 30; i++) {
        particles.push(new Particle(x, y));
      }
    }

    function animate() {
  // ì •ì  ëª¨ë“œì´ê±°ë‚˜ ì¼ì‹œì •ì§€ë©´ ë£¨í”„ ì‹œì‘/ìœ ì§€ ì•ˆ í•¨
  if (isPaused || STATIC_MODE) return;

  // ìº”ë²„ìŠ¤ í”„ë ˆì„ ì´ˆê¸°í™”
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // â–¼ ë™ì (ë–¨ì–´ì§€ëŠ” ê¸€ì) ì²˜ë¦¬ â€” ì •ì  ëª¨ë“œì—ì„  ì•ˆ ë“¤ì–´ì˜´
  letterSpawnTimer++;
  if (letterSpawnTimer % 180 === 0) {
    const remaining = activeLetters.filter(a => !fallingLetters.find(l => l.id === a.id));
    if (remaining.length > 0) {
      spawnLetter(remaining[0]);
    }
  }

  for (let i = fallingLetters.length - 1; i >= 0; i--) {
    const l = fallingLetters[i];
    l.update();
    l.draw(ctx);
    if (l.y > canvas.height + 30 && !l.marked) {
      fallingLetters.splice(i, 1);
      score -= 1;
      scoreBox.textContent = `ì ìˆ˜: ${score}`;
    }
  }

  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    p.update();
    p.draw(ctx);
    if (p.life <= 0) particles.splice(i, 1);
  }

  animationFrameId = requestAnimationFrame(animate);
}


function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}



function loadQuestion() {
  const q = quizData[current];
  textInput.value = '';
  explainBox.style.display = 'none';
  document.getElementById('fullHintPopup').style.display = 'none'; // âœ… íŒì—… ì´ˆê¸°í™”

  questionBox.textContent = q.title;
  questionBox.style.display = 'block';

  activeLetters = [...q.hint].map((char, i) => ({
    id: i,
    letter: char,
    answer: q.answers[i]
  }));

  letterSpawnTimer = 0;
  isPaused = false;
  failCount = 0;
  updateFailCountUI(); // âœ… ì‹¤íŒ¨ íšŸìˆ˜ UI ì´ˆê¸°í™”
  updateProgressUI();  // âœ… ì§„í–‰ë¥ ë„ ì—…ë°ì´íŠ¸

  if (!quizData || quizData.length === 0) return; // âœ… ì´ ë¶€ë¶„ë„ ì•ˆì— ìˆì–´ì•¼

  // â–¼ ì •ì  ê¸€ì ë Œë” (ì¤‘ìš”)
  renderChars(q.hint);
}





textInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {

  const isInputFocused = (document.activeElement.id === 'textInput');
  const isStartScreen = document.getElementById('startScreen').style.display !== 'none';
  const isCongratsScreen = document.getElementById('congratsScreen').style.display === 'flex';


if ((isStartScreen || !isStarted) && e.key === 'Enter') {
  startQuiz();
  return;
}

  if (isCongratsScreen) return;

  if (!isInputFocused) {
    e.preventDefault();
    textInput.focus();
    textInput.select();
  }



     if (isStarted && activeLetters.length === 0 && fallingLetters.length === 0) {
      if (current + 1 >= quizData.length) {
        document.getElementById('congratsScreen').style.display = 'flex';
        return;
      }
      // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
      current++;
      loadQuestion();
      updateStatusBox();
      textInput.value = '';
    }if (document.getElementById('congratsScreen').style.display === 'flex' && e.key === 'Enter') {
    restartQuiz();
    document.getElementById('startScreen').style.display = 'none';
      return;
    }





    // ğŸ”¹ ì´ë¯¸ ì‹œì‘ëœ ê²½ìš°: ì •ë‹µ ì²´í¬ ë¡œì§
    const input = textInput.value.trim();
    let matched = false;
    // â¬‡ ì •ì  ëª¨ë“œì¼ ë• ë–¨ì–´ì§€ëŠ” ê¸€ì ëŒ€ì‹ , ë‚¨ì€ ê¸€ì(activeLetters)ì˜ 'í˜„ì¬ ëª©í‘œ'ì™€ ë¹„êµ
if (STATIC_MODE) {
  const next = activeLetters[0]; // ë‚¨ì•„ìˆëŠ” ì²« ê¸€ì(í˜„ì¬ ëª©í‘œ)
  if (next && isMatchingAnswer(input, next.answer)) {
    playSound("sfx-correct");
    score += 1;
    scoreBox.textContent = `ì ìˆ˜: ${score}`;
    showFloatingText(canvas.width/2, canvas.height*0.6, "+1ì !");

    // ëª©í‘œ í•˜ë‚˜ ì œê±°
    activeLetters.shift();
    popAndRemoveFirstTile();
    updateProgressUI();

    // ë¬¸ì œ ì™„ë£Œ ì‹œ ë‹¤ìŒ ë¬¸ì œë¡œ
    if (activeLetters.length === 0) {
      setTimeout(() => {
        if (current + 1 >= quizData.length) {
          document.getElementById('congratsScreen').style.display = 'flex';
          return;
        }
        playSound("sfx-next");
        current++;
        loadQuestion();
        updateStatusBox();
      }, 150);
    }

    textInput.value = '';
    return; // âœ… ì •ì  ëª¨ë“œ ì²˜ë¦¬ëŠ” ì—¬ê¸°ì„œ ë
  } else {
    // ì˜¤ë‹µ ì²˜ë¦¬(ê¸°ì¡´ê³¼ ë™ì¼í•œ íš¨ê³¼)
    playSound("sfx-wrong");
    failCount++;
    updateFailCountUI();

    if (failCount === 5) {
      document.getElementById("hintText").textContent = quizData[current].explain;
      explainBox.classList.add('visible');
      explainBox.style.display = 'block';
    }
    if (failCount === 10) {
      const fullHintBox = document.getElementById('fullHintPopup');
      const content = document.getElementById('fullHintContent');
      const currentQuiz = quizData[current];
      let html = `<strong>ë¬¸ì œ:</strong> ${currentQuiz.title}<br><br>`;
      html += `<strong>íŒíŠ¸:</strong> ${currentQuiz.hint}<br><br>`;
      html += `<strong>ì •ë‹µ ëª©ë¡:</strong><br><ul>`;
      currentQuiz.answers.forEach(ans => {
        html += `<li><strong>${ans.letter}</strong>: ${ans.text}</li>`;
      });
      html += `</ul><br><em style="color:#ccc;">â€» í•™ìŠµìš©ìœ¼ë¡œ ì •ë‹µ ì „ì²´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</em>`;
      content.innerHTML = html;
      fullHintBox.style.display = 'block';
    }

    textInput.classList.add('shake');
    setTimeout(() => textInput.classList.remove('shake'), 300);
    textInput.value = '';
    return; // âœ… ì •ì  ëª¨ë“œ ë¶„ê¸° ì¢…ë£Œ
  }
}

    for (let i = 0; i < fallingLetters.length; i++) {
      const l = fallingLetters[i];
      if (!l.marked && isMatchingAnswer(input, l.answer)) {
        playSound("sfx-correct");
        l.marked = true;
        explode(l.x, l.y);
        showFloatingText(l.x, l.y);
        score += 1;
        scoreBox.textContent = `ì ìˆ˜: ${score}`;
        fallingLetters.splice(i, 1);
activeLetters = activeLetters.filter(a => a.id !== l.id);
popAndRemoveTileById(l.id);   // â† ì´ ì¤„ ì¶”ê°€ (í•´ë‹¹ íƒ€ì¼ íŒ¡!)
        updateProgressUI();
        matched = true;
        break;
      }
    }

       if (matched) {
      setTimeout(() => {
      if (activeLetters.length === 0 && fallingLetters.length === 0) {
  if (current + 1 >= quizData.length || !quizData[current + 1]) {
    document.getElementById('congratsScreen').style.display = 'flex';
    return;
  }


  const box = document.getElementById('questionBox');
  box.classList.add('fade-out');
  setTimeout(() => {
    playSound("sfx-next");
    current++;
    loadQuestion();
    box.classList.remove('fade-out');
    box.classList.add('fade-in');
    setTimeout(() => box.classList.remove('fade-in'), 500);
  }, 500);
}
      }, 100);
    }
                  

if (!matched) {
  playSound("sfx-wrong");
  failCount++;
  updateFailCountUI(); // âœ… ì—¬ê¸° ì¶”ê°€

  // ğŸ¯ í•´ì„¤ì€ ì •í™•íˆ 5ë²ˆì§¸ í‹€ë ¸ì„ ë•Œë§Œ
  if (failCount === 5) {
    document.getElementById("hintText").textContent = quizData[current].explain;
    explainBox.classList.add('visible');
    explainBox.style.display = 'block';
  }

  // ğŸ¯ ì „ì²´ ë³´ê¸° íŒì—…ì€ ì •í™•íˆ 10ë²ˆì§¸ í‹€ë ¸ì„ ë•Œë§Œ
  if (failCount === 10) {
    const fullHintBox = document.getElementById('fullHintPopup');
    const content = document.getElementById('fullHintContent');
    const currentQuiz = quizData[current];
    let html = `<strong>ë¬¸ì œ:</strong> ${currentQuiz.title}<br><br>`;
    html += `<strong>íŒíŠ¸:</strong> ${currentQuiz.hint}<br><br>`;
    html += `<strong>ì •ë‹µ ëª©ë¡:</strong><br><ul>`;
    currentQuiz.answers.forEach(ans => {
      html += `<li><strong>${ans.letter}</strong>: ${ans.text}</li>`;
    });
    html += `</ul><br><em style="color:#ccc;">â€» í•™ìŠµìš©ìœ¼ë¡œ ì •ë‹µ ì „ì²´ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</em>`;
    content.innerHTML = html;
    fullHintBox.style.display = 'block';
  }

  setTimeout(() => textInput.classList.remove('shake'), 300);





          if (failCount >= 5) {
            document.getElementById("hintText").textContent = quizData[current].explain;
explainBox.classList.add('visible');
           explainBox.style.display = 'block';
          }
          textInput.classList.add('shake');
          setTimeout(() => textInput.classList.remove('shake'), 300);
        }
        textInput.value = '';
      }   
    });


function isMatchingAnswer(userInput, answerObj) {
  const normalize = str =>
    str.replace(/\s/g, '')
       .replace(/[^\wê°€-í£]/g, '')
       .toLowerCase();

  const input = normalize(userInput);
  const base = normalize(answerObj.text);
  const aliases = (answerObj.aliases || []).map(normalize);

  if (matchMode === 'strict') {
    return input === base || aliases.includes(input);
  }

  if (matchMode === 'normal') {
    const wordsMatch = (inputRaw, targetRaw) => {
      const tokenize = str => str.match(/[ê°€-í£\w]+/g) || [];
      const inputWords = tokenize(inputRaw);
      const targetWords = tokenize(targetRaw);
      return targetWords.every(tw => inputWords.some(iw => iw.includes(tw)));
    };
    return input.includes(base)
        || aliases.some(a => input.includes(a))
        || wordsMatch(userInput, answerObj.text)
        || aliases.some(alias => wordsMatch(userInput, alias));
  }

  if (matchMode === 'fuzzy') {
    return getSimilarity(input, base) >= 0.8
        || aliases.some(alias => getSimilarity(input, alias) >= 0.8);
  }

  return false;
}


function getSimilarity(a, b) {
  const distance = levenshtein(a, b);
  return 1 - distance / Math.max(a.length, b.length);
}

function levenshtein(a, b) {
  const matrix = Array.from({ length: a.length + 1 }, () => []);
  for (let i = 0; i <= a.length; i++) matrix[i][0] = i;
  for (let j = 0; j <= b.length; j++) matrix[0][j] = j;

  for (let i = 1; i <= a.length; i++) {
    for (let j = 1; j <= b.length; j++) {
      const cost = a[i - 1] === b[j - 1] ? 0 : 1;
      matrix[i][j] = Math.min(
        matrix[i - 1][j] + 1,
        matrix[i][j - 1] + 1,
        matrix[i - 1][j - 1] + cost
      );
    }
  }
  return matrix[a.length][b.length];
}




shuffleArray(quizData);
textInput.focus();
document.getElementById('statusBox').textContent = 'ì§„í–‰: - / -';

// âœ… ì—¬ê¸° ì•„ë˜ì— ë°”ë¡œ ì¶”ê°€í•˜ì„¸ìš”
document.querySelectorAll('input[name="mode"]').forEach(radio => {
  radio.addEventListener('change', (e) => {
    matchMode = e.target.value;
    console.log(`âœ… ì •ë‹µ ì²´í¬ ëª¨ë“œ ë³€ê²½ë¨: ${matchMode}`);
  });
});



// âœ… ì¸íŠ¸ë¡œ í™”ë©´ í´ë¦­ ì‹œ textInputì— í¬ì»¤ìŠ¤
document.getElementById('startScreen').addEventListener('click', () => {
  textInput.focus();
});
// âœ… ì™„ë£Œ í™”ë©´ ìˆ¨ê¹€ ì´ˆê¸°í™” (ì¸íŠ¸ë¡œì—ì„œ ì ê¹ ë³´ì´ëŠ” ê²ƒ ë°©ì§€)
document.getElementById('congratsScreen').style.display = 'none';


document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const fullHintBox = document.getElementById('fullHintPopup');

    if (fullHintBox.style.display === 'block') {
      closeFullHintPopup(); // âœ… ì´ê±¸ë¡œ êµì²´
    } else {
      openFullHintManually();
    }
  }






  
  // âœ… Shift + â†’ë¡œ ë¬¸ì œ ìŠ¤í‚µ
  if (e.shiftKey && e.key === 'ArrowRight') {
    if (!isStarted || isPaused) return;

    if (current + 1 >= quizData.length) {
      document.getElementById('congratsScreen').style.display = 'flex';
      return;
    }


    

    current++;
      failCount = 0; // âœ… ì´ ì¤„ì„ ì¶”ê°€í•˜ì„¸ìš”!!!
updateFailCountUI(); // âœ… ì´ˆê¸°í™” ì‹œ UI ë°˜ì˜




    loadQuestion();
    updateStatusBox();
    playSound("sfx-next");

    // íš¨ê³¼ì ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆê²Œ ì…ë ¥ì°½ ì´ˆê¸°í™”
    textInput.value = '';
    explainBox.style.display = 'none';
    explainBox.classList.remove('visible');
    return;
  }

  // ê¸°ì¡´ Enter ê´€ë ¨ í¬ì»¤ìŠ¤ ë³µêµ¬
  if (e.key === 'Enter') {
    const isInputFocused = (document.activeElement.id === 'textInput');
    const isStartScreen = document.getElementById('startScreen').style.display !== 'none';
    const isCongratsScreen = document.getElementById('congratsScreen').style.display === 'flex';

    if (isStartScreen || isCongratsScreen) return;

    if (!isInputFocused) {
      e.preventDefault();
      textInput.focus();
      textInput.select();  // í…ìŠ¤íŠ¸ ì „ì²´ ì„ íƒ (UX í–¥ìƒ)
    }
  }
});


document.addEventListener("visibilitychange", function () {
  if (document.hidden) {
    cancelAnimationFrame(animationFrameId); // âœ… ë£¨í”„ ì¤‘ì§€
  } else {
    // ìˆ˜ë™ ì¼ì‹œì •ì§€ ì¤‘ì´ ì•„ë‹ˆê³ , ê²Œì„ì´ ì‹œì‘ëœ ìƒíƒœë©´ ì¬ê°œ
   if (!wasManuallyPaused && isStarted && !STATIC_MODE) {
  animate();
}

  }
});




function startQuiz() {
  if (isStarted) return;
  isStarted = true;
  document.getElementById('startScreen').style.display = 'none';
  questionBox.style.display = 'block';
  loadQuestion();
 updateStatusBox();
if (!STATIC_MODE) animate();  // ì •ì  ëª¨ë“œë©´ ë£¨í”„ ë¯¸í˜¸ì¶œ

  setTimeout(() => {
    textInput.focus();
    textInput.select();
  }, 0);
}




// ëª¨ë°”ì¼ í„°ì¹˜ ë˜ëŠ” í´ë¦­ìœ¼ë¡œ ì‹œì‘
const startScreen = document.getElementById('startScreen');




  </script>



<div id="fullHintPopup">
  <h2>ğŸ’¡ íŒíŠ¸ ì „ì²´ ë³´ê¸°</h2>
  <div id="fullHintContent"></div>
  <div class="hint-actions">
    <button id="fullHintCloseBtn" onclick="closeFullHintPopup()">ë‹«ê¸° âœ–</button>
  </div>
</div>



<script>
// í‚¤ë³´ë“œ ë†’ì´ ë°˜ì˜ (ì¶”ê°€)
(function(){
  const vv = window.visualViewport;
  if(!vv) return;
  let raf=null;
  const update=()=>{
    raf=null;
    const kb=Math.max(0, window.innerHeight - (vv.height + vv.offsetTop));
    document.documentElement.style.setProperty('--kb', kb + 'px');
  };
  const on=()=>{ if(!raf) raf=requestAnimationFrame(update); };
  vv.addEventListener('resize', on);
  vv.addEventListener('scroll', on);
  window.addEventListener('orientationchange', ()=>setTimeout(update,300));
  update();
})();

// HUD/ì…ë ¥ì°½ ì‹¤ì œ ë†’ì´ë¥¼ CSS ë³€ìˆ˜ë¡œ ë°˜ì˜ (ì¶”ê°€)
(function(){
  const hud=document.getElementById('hudTop');
  const box=document.getElementById('inputBox');
  const setVars=()=>{
    if(hud) document.documentElement.style.setProperty('--hudH', (hud.offsetHeight||48)+'px');
    if(box) document.documentElement.style.setProperty('--footerH', (box.offsetHeight||56)+'px');
  };
  setVars();
  if(hud) new ResizeObserver(setVars).observe(hud);
  if(box) new ResizeObserver(setVars).observe(box);
  window.addEventListener('resize', ()=>setTimeout(setVars,100));
})();

// í¬ì»¤ìŠ¤ ê°€ë¦¼ ë°©ì§€ (ì¶”ê°€)
document.addEventListener('focusin', e=>{
  if(e.target.matches('input,textarea,[contenteditable="true"]')){
    setTimeout(()=>e.target.scrollIntoView({block:'center', inline:'nearest', behavior:'smooth'}),120);
  }
});

// (ì„ íƒ) ë¬¸ì ì •ì  ë Œë” í•¨ìˆ˜ (ì¶”ê°€)
function renderChars(text){
  const row=document.getElementById('quizRow');
  if(!row) return;
  row.innerHTML='';
  [...text].forEach((c, idx)=>{
    const s=document.createElement('span');
    s.className='ch';
    s.textContent=c;
    s.dataset.id = idx;        // â† ë‚˜ì¤‘ì— ì–´ë–¤ ê¸€ìì¸ì§€ ì°¾ì„ í‘œì‹
    row.appendChild(s);
  });
}

function popAndRemoveTileById(id){
  const row = document.getElementById('quizRow');
  if(!row) return;
  const el = row.querySelector(`.ch[data-id="${id}"]`);
  if(!el) return;
  el.classList.add('pop');
  setTimeout(()=>el.remove(), 280);
}

function popAndRemoveFirstTile(){
  const row = document.getElementById('quizRow');
  if(!row) return;
  const el = row.querySelector('.ch');
  if(!el) return;
  el.classList.add('pop');
  setTimeout(()=>el.remove(), 280);
}
// ì˜ˆì‹œ: renderChars('ê±´ì¶•ì „ê¸°ì„¤ë¹„ê¸°ìˆ ì‚¬');
</script>

<script>
  // êµ¬í˜• iOSì—ì„œ overscroll-behaviorê°€ ë¶ˆì•ˆí•˜ë©´ ë°”ê¹¥ ì˜ì—­ í„°ì¹˜ ì´ë™ ìì²´ë¥¼ ë§‰ì•„ì¤€ë‹¤.
  (function () {
    const ALLOW = ['#fullHintPopup', '.stage']; // ìŠ¤í¬ë¡¤ í—ˆìš©í•  ì˜ì—­

    document.addEventListener('touchmove', function (e) {
      const ok = ALLOW.some(sel => e.target.closest(sel));
      if (!ok) {
        e.preventDefault(); // ë°”ê¹¥ ì˜ì—­ì˜ ê³ ë¬´ì¤„(í° í™”ë©´) ë°©ì§€
      }
    }, { passive: false });

    // íŒì—… ì—´ë¦´ ë•Œ ë°”ë”” ìŠ¤í¬ë¡¤ ì ê·¸ê³  ì‹¶ìœ¼ë©´:
    // document.body.classList.add('lock-scroll');
    // ë‹«ì„ ë•Œ:
    // document.body.classList.remove('lock-scroll');
  })();
</script>

<script>
/**
 * ë¹ˆ í™”ë©´(ë¹„ì¸í„°ë™í‹°ë¸Œ ì˜ì—­) íƒ­ ì‹œ í‚¤ë³´ë“œ ë‹«ê¸°
 * - ì…ë ¥ì°½(#inputBox), ì „ì²´íŒíŠ¸íŒì—…(#fullHintPopup), HUD(.hud-top), ë³´ì¡° ë²„íŠ¼(#manualHintButton, #restartCurrentBtn)ì€ ì œì™¸
 * - pointerdownìœ¼ë¡œ í„°ì¹˜/ë§ˆìš°ìŠ¤ ëª¨ë‘ ëŒ€ì‘
 */
(function(){
  const EXCLUDE_SELECTORS = [
    '#inputBox',            // ì…ë ¥ì°½ ì˜ì—­
    '#fullHintPopup',       // ì „ì²´ íŒíŠ¸ íŒì—…
    '.hud-top',             // ìƒë‹¨ HUD
    '#manualHintButton',    // íŒíŠ¸ ì „ì²´ ì—´ê¸° ë²„íŠ¼ ë˜í¼
    '#restartCurrentBtn',   // í˜„ì¬ ë¬¸ì œ ë‹¤ì‹œ ë²„íŠ¼ ë˜í¼
    '#modeSelector',        // ëª¨ë“œ ë¼ë””ì˜¤
    '#skipHint',            // ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼
    '#startScreen',         // ì‹œì‘ í™”ë©´
    '#congratsScreen'       // ì™„ë£Œ í™”ë©´
  ];

  function isInsideExcluded(elem){
    return EXCLUDE_SELECTORS.some(sel => elem.closest(sel));
  }

  function dismissKeyboard(){
    const ae = document.activeElement;
    if (ae && (ae.tagName === 'INPUT' || ae.tagName === 'TEXTAREA' || ae.isContentEditable)) {
      ae.blur();
    }
  }

  // ìŠ¤í…Œì´ì§€/ìº”ë²„ìŠ¤/ë°”ë”” ì–´ë””ë¥¼ íƒ­í•´ë„ ë™ì‘í•˜ë„ë¡ ë°”ë””ì— ì„¤ì¹˜
  document.body.addEventListener('pointerdown', function(e){
    // ì¸í„°ë™í‹°ë¸Œ ì˜ì—­ì´ë©´ ë¬´ì‹œ
    if (isInsideExcluded(e.target)) return;
    // ë§í¬/ë²„íŠ¼ ë“± ê¸°ë³¸ ì¸í„°ë™ì…˜ ë°©í•´í•˜ì§€ ì•ŠìŒ
    dismissKeyboard();
  }, { passive: true });

  // iOSì—ì„œ ì¢…ì¢… blurê°€ ëŠ¦ê²Œ ë¨¹ì„ ë•Œë¥¼ ëŒ€ë¹„í•œ ë³´ì¡° ì²˜ë¦¬(ì„ íƒ)
  document.body.addEventListener('focusin', function(e){
    // í¬ì»¤ìŠ¤ê°€ ë‹¤ì‹œ ì…ë ¥ìœ¼ë¡œ ì˜®ê²¨ì¡Œë‹¤ë©´ ê·¸ëŒ€ë¡œ ë‘ê¸°
  });
})();
</script>


</body>
</html>
